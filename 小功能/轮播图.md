### 放置图片  
> 实现一行内放置多张与页面等宽的图片。  

```
#hy-swiper {
  overflow: hidden;
  position: relative;
}
.swiper {display: flex;}
.swiper .slide {width: 100%; flex-shrink: 0;}
.swiper .slide img {width: 100%;}
```
:herb: 隐藏溢出、单行布局、不在父宽内压缩  
:herb: `hy-swiper` 中还包含了指示器、`swiper` 为幻灯片的容器、每个 `slide` 为一个幻灯片

----

### 自滚动部分  
> 只需要在首尾添加对应的克隆幻灯片，并在滚动（变换）到这两张幻灯片后马上滚动到本体，就能产生视觉上的无限滚动效果。  

1. 给 [mounted](https://cn.vuejs.org/v2/api/#mounted) 添加回调：

```
3秒后，调用handleDom()、startTimer()  // 在幻灯片列表首尾添加幻灯片并初始化位置、开始自滚动 
```

2. 执行handleDom()  

    - 获取幻灯片容器和幻灯片列表并保存    
    - 保存当前幻灯片列表的长度为需求幻灯片长度  
    - 如果幻灯片个数大于 1，执行：  
      + 深克隆首尾两个幻灯片元素并保存  
      + 首前连尾，尾后添首，即此时多了两个幻灯片  
      + 将幻灯片容器的 offsetWidth 保存，即容器在视口的宽度  
      + 获取容器样式并保存 
    - 调用 `setTransform(-视口容器宽度)`，即滚动到当前索引(1)的图片处  

3. 执行setTransform(position)，即调用滚动  

      - 在容器样式上添加移动变换，在 x 轴移动容器

4. 执行startTimer()  
    
    - 创建循环定时，重复在间隔时间后执行：   
      + 当前索引自身+1  
      + 调用 `scrollContent(-当前索引*视口容器宽度)`。即执行需求幻灯片间的滚动，移动到下一张幻灯片   

5. 执行scrollContent(currentPosition) 
   
    - // 设置在滚 //
    - 在容器样式上添加移动变换的过渡时间    
    - 调用 `setTransform(currentPosition)`，即进行滚动  
    - 调用checkPosition()，即保证能在需求幻灯片间以正常执行操作    
    

6. 执行checkPosition()   

    - 移动变换完成后，执行：
      +  // 设置没在滚 //
      + 将容器样式上移动变换的过渡时间设置为 0  
      + if 当前索引 >= 需求幻灯片长度  
        - 将当前索引改为 1  
        - 调用滚动，移动到第二张幻灯片
      + if 当前索引 <= 0  
        -  将当前索引改为需求幻灯片长度，即最后一张需求幻灯片  
        - 调用滚动，移动到最后一张需求幻灯片 

----  
### 触屏滑动  

监听幻灯片容器上的触屏事件，设置滑动的绑定效果，并根据滚动距离占视口容器宽度的比例判断当前索引的值。  

事件 | 说明
:-: | :-:
touchstart | 触屏时触发
touchmove | 在屏幕上滑动时连续触发
touchend | 从屏幕上移开时触发

touchstart  
- if 正在滚动
    + 退出函数  
    + 在滚动时触摸
- 不在滚动时触摸
- 停止自滚动
- 保存首个触点在页面上的 x 坐标

touchmove  
- if 正在滚动 || 在滚动时触摸  
    + 阻止默认行为  
    + 退出函数 
- 计算出用户拖动的位移，最终求出此时容器相对边缘的距离 x。    
- 设置滚动为 x

touchend
- if 正在滚动 || 在滚动时触摸
    + 退出函数 
- 求出用户拖动的距离  
- 判断用户拖动的位移  
  + 为 0 时，退出函数  
  + 大于 0 且拖动距离超出视口容器宽度的一半时  
    -  当前索引-1
  + 小于 0 且拖动距离超出视口容器宽度的一半时  
    -  当前索引+1 
- 根据索引执行需求幻灯片间的滚动  
- 开启自滚动(图片实际展示的时间是定时器的 interval，所以才会感觉很平滑)  

----  
### 参考选项  

props  
属性 | 默认值 | 说明
:-: | :-: | :-:
interval | 3000 | 自滚动间隔
animDuration | 300 | 滚动过渡时长
moveRatio | 0.25 | 划动占比
showIndicator | true | 指示器

data  
键 | 默认值 | 说明
:-: | :-: | :-:
slideCount | 0 | 需求幻灯片个数
totalWidth | 0 | 幻灯片容器(swiper)宽度
swiperStyle | {} | 幻灯片容器样式
currentIndex | 1 | 当前索引
scrolling | false | 是否在滚  

:snowflake: 滚动间隔必须大于过渡时长，否则执行顺序会乱，产生不好的效果。    

----  
### 指示器的添加  
> 遍历 slideCount 来创建对应数量的指示项。由于轮播是和当前索引绑定的，所以可以使用[方法](https://cn.vuejs.org/v2/api/#methods)动态添加活跃样式。  








