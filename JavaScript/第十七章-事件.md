# 第十七章 事件

## 事件流  
> 事件流描述了页面接受事件的顺序。  

**事件冒泡：** 从最具体的元素(节点)开始触发，然后向上传播至没有那么具体的元素(最终到达文档)。  

**事件捕获：** 与事件冒泡的顺序相反。  

**DOM事件流：** 包含事件捕获、到达目标和事件冒泡。

## 事件处理程序  
> 事件处理程序的名字以 "on" 开头。

[HTML事件处理程序](#HTML事件处理程序)   

[DOM0事件处理程序](#DOM0事件处理程序)  

[DOM2事件处理程序](#DOM2事件处理程序)  

[IE事件处理程序](#IE事件处理程序)  

[跨浏览器事件处理程序](#跨浏览器事件处理程序)  

----

### HTML事件处理程序   
> 在 HTML 元素中，事件处理程序以 HTMl 属性的形式指定，属性名为事件处理程序的名字，值为 JS 代码。  
```
<input type="button" value="提交" onclick="console.log('你好！')"/>
```

#### 外部函数  
> 作为事件处理程序的代码可以访问全局作用域，showMessage()函数可以在<script>或外部文件中定义。  
```
<input type="button" value="提交" onclick="showMessage()"/>
```

#### 属性值
 序号 | 特性
 :-: | :-: 
 ① | 代码不能直接使用 HTML 语法字符，如双引号
 ② | 代码中的 this 将指向目标元素（自身）
 ③ | 大多数会封装在try/catch块中，以防止函数定义之前按钮被点击
 
 
#### 表单元素  
> 对于表单元素，可以直接访问同一表单中的其他成员。  
```
<form method="post">
    <input type="text" name="username" value="">
    <input type="button" value="Echo Username"
        onclick="console.log(username.value)">
</form>
```

----

### DOM0事件处理程序   
> 每个 DOM 元素都有事件处理程序属性，只要把这个属性赋值为一个函数即可，函数中的 this 引用元素本身。

```
let btn = document.getElementById("myBtn");
btn.onclick = function() {
    console.log(this.id);  // myBtn
}
```

----

### DOM2事件处理程序 
> 方法暴露在每个 DOM 元素上。

 函数 | 说明
 :-: | :-: 
 addEventListener() | 添加事件处理程序，可以同时为一个事件调用多次。
 removeEventListener() | 删除通过 `addEventListener()` 添加的事件处理程序，匿名函数无法移除。

```
let btn = document.getElementById("myBtn");
btn.addEventListener("click", () => {
    console.log(this.id);
}, false);
```
> 大多数情况下，事件处理程序会被添加到事件流的冒泡阶段，主要原因是跨浏览器兼容性好。  

----

### IE事件处理程序
> 与 DOM2 事件处理程序相似的方法：`attachEvent()` 和 `detachEvent()`
 
 特性 | addEventListener()  | attachEvent()
  :-: | :-: | :-: 
 第一参数 | "click" | "onclick"
 this 指向 | 元素本身:grey_question: | window
 添加处理程序的触发顺序 | 正向触发 | 方向触发
 
----
### 跨浏览器事件处理程序  

:whale2:跨浏览器事件处理程序·半成品版 P498
 











