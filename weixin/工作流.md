  
+ 基础    
  - [参考资料](#参考资料)  
  - [页面构建基本思路](#页面构建基本思路)  
  - [获取及修改本地值](#获取及修改本地值)  
  - [页面传值&缓存](#页面传值&缓存)  
  - [页面跳转](#页面跳转)
+ 逻辑处理  
  - [使用高阶数组方法](#使用高阶数组方法)
+ 事件传值  
  - [传递循环项的某个属性给处理程序](#传递循环项的某个属性给处理程序)
  - [相同逻辑复用处理程序](#相同逻辑复用处理程序)  
+ [其他要点](#其他要点)  
  - [快捷操作](#快捷操作)  
  - [列表渲染](#列表渲染)  
  - [其他](#其他)  
+ 对比Vue  
  - [最常用标签](#最常用标签)  
  - [模版语法](#模版语法)  
  - [条件渲染](#条件渲染)

#### 参考资料  

索引 | 项目 
:- | :-  
① | [文档](https://developers.weixin.qq.com/miniprogram/dev/component/) 
② | [小程序后台](https://mp.weixin.qq.com/)

#### 页面构建基本思路  

顺序 | 步骤 | 文件 |说明  
:- | :- | :- | :-
① | 更改页面名称 | .json | `"navigationBarTitleText": "**"`
② | 添加需要的自定义组件 | .json | `"usingComponents": {"MyCom": "相对路径/MyCom/MyCom"},`
③ | 给文档最外围 `<view>` 添加类名 | .wxml | 大部分情况需要  
④ | 将组件添加到文档 | .wxml | /
⑤ | 布局文档，添加类名 | .wxml | /
⑥ | 将样式文件改后缀 `less` | .wxss | 插件自动生成对应文件  
⑦ | 样式选择器不写根类 | .less | 设置的样式只作用于当前页面
⑧ | 双栏写样式 | .less | 组合 `Ctrl + B`、`Ctrl + \`
⑨ | 值得留意 | .less | `page` 为根元素，可以添加底内边距给工具栏留空间，或设置背景  
⑩ | 逻辑处理 | .js | `onLoad` 适合请求并保存**固定**数据
⑩ | 逻辑处理 | .js | `onShow` 适合请求并保存**可变化**数据，如收藏件数  
⑩ | 逻辑处理 | .js | 创建变量、请求、保存数据到变量、保存到本地    
⑩ | 逻辑处理 | .js | 涉及不同页面传值，通常使用缓存  

#### 获取及修改本地值  
> 大多数的逻辑操作都涉及到相关操作。  

类型 | 说明 | 获取值 | 保存值
:- | :- | :- | :-
data 中的数据 | 会在界面渲染的值 | this.data.* | `this.setData({*:**})`  
data 的同级数据 | 不在界面渲染的值 | this.* | this.* = ** 
> 需要对 data 中的数据进行一些改变原值的操作时，官方推荐先将数据深拷贝保存到函数变量，再作处理。

#### 页面传值&缓存  
> 涉及页面传值或相关信息时，需要利用到缓存技术。  
> 
> 经常需要在逻辑开始时获取缓存，涉及高阶数组时，为防止没有设置过缓存，需要**备用值**及长度判断。  

操作 | 方法 | 说明
:- | :- | :-
获取 | `wx.getStorageSync('info')` 
保存 | `wx.setStorageSync('info', result)`

#### 页面跳转  

索引 | 类型 | 文件 | 说明  
:- | :- | :- | :-
① | 标签跳转 | .wxml | `<navigator url="/pages/yemian/index"></navigator>`
② | 跳转到标签页 | .wxml | 需要额外标签属性 `open-type="switchTab"`  
③ | 携带参数 | .wxml | 在 `url` 值添加尾缀 `路径?*={{**}}`
④ | 获取参数 | .js | 在目标页面的 `onLoad` 钩子中作为首参获取
④ | 获取参数 | .js | 在目标页面的 `onShow` 钩子中利用页面栈获取
⑤ | 返回上一页 | .js | `wx.navigateBack({delta: 1})`  

```
onShow: function () {
  // 从页面栈中获取所需页面参数
  const pagesArr = getCurrentPages();
  let {targetParam} = pagesArr[pagesArr.length-1].options;
}
```

----

### 逻辑处理  

#### 使用高阶数组方法  
 
索引 | 注意项 | 说明 | 对策  
:- | :- | :- | :-
① | 避免报错 | 不能对非数组类型使用这些方法 | `let arr = wx.getStorageSync('info') \|\| []`
② | 注意结果 | 对空数组使用，得到的结果可能出乎意料 | `if(!arr.length)`

----

### 事件传值  

#### 传递循环项的某个属性给处理程序 

操作 | 文件 | 方法
:- | :- | :-
传递 | .wxml | `data-*="{{item.**}}"` 
接收 | .js | `e.currentTarget.dataset.*`

#### 相同逻辑复用处理程序
> 通过传递不同的计算参数，可以实现在不同的地方复用处理程序。  

----

### 其他要点  

#### 快捷操作  

索引 | 注意项 | 文件 | 操作  
:- | :- | :- | :-
① | 快捷提示内置接口方法 | .js | `wx-*`  

#### 列表渲染  

属性 | 说明 | 必要性 | 示例  
:- | :- | :- | :-
wx:for | 绑定的数据 | 基础 | wx:for="{{listData}}"
wx:key | 减少更新损耗。值**可为**循环项的某个属性 | 建议 | wx:key="goods_id"
wx:for-item | 项在循环中的变量名 | / | wx:for-item="item1"
wx:for-index | 索引在循环中的变量名 | / | wx:for-item="index1"  

#### 页面对比组件  

索引 | 类型 | 文件 | 全局 | 页面 | 组件 
:- | :- | :- | :- | :- | :-
① | 包裹名 | .js | App | Page | Component
② | 配置文件 | .json | 多种字段 | 仅能配置[window字段](https://github.com/SpringLoach/origin-2021/blob/happy-day/weixin/section1.md#window字段)的选项 | /
③ | 常用独特配置 | .js | onLaunch | onLoad、onShow | methods、properties

#### 其他  

操作 | 示例
:- | :- 
动态类 | class="icon-svgcollect {{isCollect?'iconfont2':'iconfont'}}"
动态类 | class="user_info_wrap {{userInfo.avatarUrl?'':'show_bgc'}}"
动态路径 | url="/pages/goods_detial/index?goods_id={{item.goods_id}}"
动态路径 | src="{{item.goods_small_logo?item.goods_small_logo:'https://../...jpg'}}"

----  

### 对比Vue  

#### 最常用标签  

小程序 | Vue | 说明  
:-: | :-: | :-
<text\> | <span\> | 行内元素，不换行
<view\> | <div\> | 块级元素，换行
<block\> | <template\> | 不参与渲染，可充当循环结构的容器或条件渲染种包含多元素的**容器** 

#### 模版语法  
> 可以往花括号里添加变量、表达式。  

性质 | 小程序 | Vue 
:-: | :-: | :-
文本节点 | {{}} | {{}}
属性值 | {{}} | 使用 v-bind
条件渲染 | {{}} | 绑定变量  

#### 条件渲染  
> `wx:if` 是惰性的，切换条件时进行**局部渲染**或销毁。  

小程序 | Vue | 说明  
:-: | :-: | :-
wx:if | v-if | 动态绑定
wx:elif | v-else-if | 动态绑定
wx:else | v-else | 不需绑定
hidden | v-show | 动态绑定

----

### 常用接口  

类型 | 接口 | 说明  
:- | :- | :-  
基础 | wx.canIUse | 判断小程序的API，组件等在当前版本是否可用
路由 | [wx.switchTab](#wx_switchTab) | 跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面
路由 | wx.navigateTo | 留当前页面，跳转到应用内的某个页面
路由 | wx.navigateBack | 关闭当前页面，返回上一页面或多级页面


#### wx_switchTab
> 注意路径要加前缀 `/` 表示绝对路径

```
wx.switchTab({url: '/pages/new/index'})
```














